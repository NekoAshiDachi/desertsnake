{% extends "base.html" %}

{% block app_content %}

<h1>{{ k.name }}
    {% if k.kanji %}({{ k.kanji }}){% endif %}
</h1>

<ul class="list-unstyled">
    {% if k.creator %}
        Creator: <a href="{{ url_for('library.person', id=k.creator.id) }}">
                {{ k.creator.firstName }} {{ k.creator.lastName }}</a><br>
    {% endif %}
</ul>

{% if k.parent_kata %}
    Parent kata:
    {% for n, parent in enumerate(k.parent_kata) %}
         <a href="{{ url_for('library.kata', id=parent.id) }}">{{ parent.name }}</a>
        {%- if n != len(k.parent_kata) - 1 %}, {% endif %}
    {% endfor %}<br>
{% endif %}

{% if k.children_kata %}
    Children kata:
    {% for n, child in enumerate(k.children_kata) %}
        <a href="{{ url_for('library.kata', id=child.id) }}">{{ child.name }}</a>
        {%- if n != len(k.children_kata) - 1 %}, {% endif %}
    {% endfor %}<br>
{% endif %}

{% if k.history %}
    <br>
    <a class="btn btn-secondary" data-toggle="collapse" href="#History" role="button" aria-expanded="false"
       aria-controls="History">History</a><br><br>

    <div id="History" class="collapse">
        {{ k.history | safe }}
        <br><br>
    </div>
{% endif %}

{% set ref_form_header = k.name %}
{% include '_ref.html' %}

<!-- TODO fix kata db entry: sometimes doesn't submit, and id goes under glossary -->

<br><br>

<p><a href="{{ url_for('library.kata_all') }}#Kata List">Back to kata list</a></p>

<!-- TODO add creator altName add kata sidebar -->
<!--// TODO related kata-->

{% endblock %}