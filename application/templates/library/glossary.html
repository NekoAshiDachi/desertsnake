{% extends "base.html" %}

{% block app_content %}

<script src="<?=base_url()?>assets/js/filter.js"></script>

<h2>Glossary</h2>

<p>A handy table of Japanese terms used in the dojo.</p>

<p>Finding yourself looking at other people first after hearing a command for <i>hidari kibadachi, morote gedan
    barai</i>? Need a reminder for the meaning of <i>ryō ken jūji uke</i>? This glossary will help. <i>Tachi</i>
    contains stances, <i>uke</i> blocks, <i>tsuki</i> punches, <i>uchi</i> elbow strikes, and <i>keri</i> kicks. If you
    are wondering why tsuki and keri are not spelled <i>zuki</i> and <i>geri</i>, it is because that is how they are
    romanized when not following another word.</p>

<input type="search" class="light-table-filter" data-table="glossary" placeholder="Filter">

<table class="glossary table">
    <tr>
        <th>Term</th>
        <th>Translation</th>
        <th>Kanji</th>glossary
        <th>Type</th>
        <th>Note</th>
    </tr>

<?php

$tips = $this->ss_model->get_data('tips');

foreach ($glossary as $g) : ?>

    <tr>
        <td><?=$g['term']?></td>
        <td><?=$g['translation']?></td>
        <td><?=$g['kanji']?></td>
        <td><?=$g['type']?></td>
        <?php echo (isset($g['text'])) ? "<td>".$g['text']."</td>" : '';

        $all_tips = array();
        foreach ($tips as $t) :
            if ($t['table'] == 'glossary' and $t['id'] == $g['id']):
                $all_tips[] = $t['TipsText'];
            endif;
        endforeach;

        if (count($all_tips) > 0) :
            $all_tips = implode('<br><br>', $all_tips); ?>
            <!-- Button trigger modal -->
            <td>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">
                Tips
            </button>

            <!-- Modal -->
            <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle"><?=$g['Term']?></h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p><?=$all_tips?></p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </td>
        <?php endif; ?>
    <!--echo (isset($g['TipsText']) ? "<td>".$g['TipsText']."</td>" : ''); ?>-->
    </tr>

<?php endforeach; ?>

</table>

{% endblock %}